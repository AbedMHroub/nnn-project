<!--
    NNN website.

    This file is part of the NNN website.

    Authors:
        Qusai Hroub <qusaihroub.r@gmail.com>
        Aseel Arafeh <arafehaseel@gmail.com>

    File description:
        This file contains HTML code for the index page.
-->

<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" type="image/x-icon" href="img\logo-color.png">
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
    <link rel="stylesheet" type="text/css" href="styles/categories.css" />
    <link rel="stylesheet" type="text/css" href="styles/details.css" />
    <link rel="stylesheet" type="text/css" href="styles/index.css" />
    <link rel="stylesheet" type="text/css" href="styles/home.css" />
    <link rel="stylesheet" type="text/css" href="styles/underMaintenance.css" />
</head>
<body>
    <div class="root">
        <div class="view-root">
            <!-- VIEW CONTAINER -->
            <div class="view" VIEW>
                <a href="#/home">Home</a>&nbsp;
            </div>
        </div>
        <!-- FOOTER -->
        <div class="footer">
            <div class="footer-right">
                <a href="#/home" class="logo"> <img src="img\logo.png" alt="شبكة الوحدة الإخبارية"></a>
            </div>
        </div>
    </div>
    <script>

        const url = 'https://541e1dc0-354b-4134-ae7d-5eaa533a1bf9-bluemix.cloudant.com';
        const auth = 'Basic NTQxZTFkYzAtMzU0Yi00MTM0LWFlN2QtNWVhYTUzM2ExYmY5LWJsdWVtaXg6NDU2YjA3NzhjODFjOWNiMDk5NzZkODU1NjQ5MDM2YzRlYTE1MTQwZTk5NDNlNWM2MGE5ZDM1MGMwNDU5YzIwMw==';

        websiteStatus();

        function websiteStatus() {
            getData("/settings", false, "sitemode", url, auth).then(state => {
                if (!state.state) {
                    window.location.href = '/#/notFound';
                }
            });
        }

        function getData (endpoint, isView, id, baseUrl, authentication) {

            return new Promise((resolve, reject) => {

                let url = baseUrl + endpoint;
                if (isView && id) {

                    url += `?key=\"${id}\"`;

                } else if (id !='') {

                    url += `/${id}`;

                }

                let http = new XMLHttpRequest();
                http.open("GET", url);
                http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                http.setRequestHeader('Accept', 'application/json');
                http.setRequestHeader("Authorization", authentication);
                http.onreadystatechange = function() {

                    if (http.readyState == 4) {

                        if (http.status == 200) {
                            let data = JSON.parse(http.responseText);
                            resolve(data);
                        } else {
                            reject();
                        }
                    }
                }
                http.send();
            });
        }

        window.onhashchange = function() {
            let config = JSON.parse(localStorage.getItem("config"));
            this.language = config.language;
            this.page.url = config.tpage;
        }

        function disqus_config() {
            let config = JSON.parse(localStorage.getItem("config"));
            this.language = config.language;
            this.page.url = config.tpage;
            // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = 'postid=1'; // Replace PAGE_IDENTIFIER with your page's unique identifier
        };
    </script>
    <script src="./potato/potato.js"></script>
    <script src="app.js"></script>
    <!-- <script src="controllers/index.js"></script> -->
</body>
</html>
